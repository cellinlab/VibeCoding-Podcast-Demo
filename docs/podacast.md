# 播客独立站设计文档

## 项目概述

基于「造物矩阵｜超级个体开放麦」播客数据，构建一个现代化的播客独立站，支持播客列表展示和详情播放功能。

## 技术栈选择

**推荐使用 React + Vite**
- **前端框架**: React 18 + TypeScript
- **构建工具**: Vite
- **样式方案**: Tailwind CSS + CSS Modules
- **音频播放**: react-audio-player 或自定义 Audio API
- **状态管理**: React Context + useReducer
- **路由**: React Router v6

**选择理由**:
1. 数据驱动界面，React 状态管理更适合
2. 组件化开发，播客卡片、播放器等可复用
3. 丰富的音频处理生态
4. 开发效率高，维护性好

## 数据结构分析

### 播客信息 (Podcast)
```typescript
interface Podcast {
  pid: string;                    // 播客ID
  title: string;                  // 播客标题
  author: string;                 // 作者
  description: string;            // 描述
  subscriptionCount: number;      // 订阅数
  episodeCount: number;           // 节目数量
  image: ImageInfo;               // 封面图片
  color: ColorScheme;             // 主题色
  podcasters: Podcaster[];        // 主持人列表
  contacts: Contact[];            // 联系方式
  playTime: number;               // 总播放时长
  latestEpisodePubDate: string;   // 最新节目发布时间
}
```

### 节目信息 (Episode)
```typescript
interface Episode {
  eid: string;                    // 节目ID
  title: string;                  // 标题
  description: string;            // 描述
  duration: number;               // 时长(秒)
  pubDate: string;                // 发布时间
  image: ImageInfo;               // 封面
  media: MediaInfo;               // 音频文件
  playCount: number;              // 播放数
  clapCount: number;              // 点赞数
  commentCount: number;           // 评论数
  transcript?: TranscriptInfo;    // 转录信息
}
```

## 功能模块设计

### 1. 播客列表页面 (`/`)

#### 页面布局
```
┌─────────────────────────────────────────┐
│ Header (Logo + Navigation)              │
├─────────────────────────────────────────┤
│ Hero Section (播客封面 + 基本信息)        │
├─────────────────────────────────────────┤
│ 播客信息卡片                             │
│ ┌─────────────────────────────────────┐ │
│ │ 主持人信息 | 联系方式 | 统计数据      │ │
│ └─────────────────────────────────────┘ │
├─────────────────────────────────────────┤
│ 节目列表                                 │
│ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐        │
│ │ EP1 │ │ EP2 │ │ EP3 │ │ EP4 │ ...    │
│ └─────┘ └─────┘ └─────┘ └─────┘        │
└─────────────────────────────────────────┘
```

#### 核心组件
- `PodcastHeader`: 播客头部信息
- `PodcastInfo`: 播客详细信息卡片
- `EpisodeCard`: 节目卡片组件
- `EpisodeList`: 节目列表容器

#### 功能特性
- 响应式布局，支持移动端
- 节目卡片显示：封面、标题、时长、发布时间、播放数
- 支持按发布时间排序
- 点击节目卡片跳转到详情页

### 2. 播客详情页面 (`/episode/:id`)

#### 页面布局
```
┌─────────────────────────────────────────┐
│ Header (Logo + Back Button)             │
├─────────────────────────────────────────┤
│ 节目信息                                 │
│ ┌─────────────────────────────────────┐ │
│ │ 封面图片                             │ │
│ │ 标题 + 描述                          │ │
│ │ 发布时间 + 时长 + 播放数             │ │
│ └─────────────────────────────────────┘ │
├─────────────────────────────────────────┤
│ 音频播放器                               │
│ ┌─────────────────────────────────────┐ │
│ │ 播放/暂停 | 进度条 | 时间 | 音量     │ │
│ └─────────────────────────────────────┘ │
├─────────────────────────────────────────┤
│ 节目详情                                 │
│ - 时间轴索引                            │
│ - 关键词标签                            │
│ - 相关链接                              │
└─────────────────────────────────────────┘
```

#### 核心组件
- `EpisodeHeader`: 节目头部信息
- `AudioPlayer`: 自定义音频播放器
- `EpisodeDetails`: 节目详细信息
- `TimelineIndex`: 时间轴索引
- `TagList`: 标签列表

#### 功能特性
- 音频播放控制（播放/暂停、进度条、音量）
- 播放进度记忆
- 时间轴快速跳转
- 响应式播放器设计
- 键盘快捷键支持

### 3. 全局组件

#### 音频播放器 (全局固定)
```
┌─────────────────────────────────────────┐
│ 当前播放: 节目标题                       │
│ ┌─────────────────────────────────────┐ │
│ │ 封面 | 播放/暂停 | 进度条 | 时间     │ │
│ └─────────────────────────────────────┘ │
└─────────────────────────────────────────┘
```

## 设计风格

### 视觉设计
- **设计风格**: 现代简约，符合播客内容调性
- **色彩方案**: 基于播客主题色 `#E0DCC7` 扩展
- **字体**: 系统字体栈，确保可读性
- **圆角**: 适度使用圆角，增加亲和力
- **阴影**: 轻微阴影，增加层次感

### 响应式设计
- **桌面端**: 1200px+ 宽屏布局
- **平板端**: 768px-1199px 适配布局
- **移动端**: <768px 单列布局

### 交互设计
- **加载状态**: 骨架屏 + 加载动画
- **空状态**: 友好的空状态提示
- **错误处理**: 优雅的错误提示
- **微交互**: 按钮悬停、卡片阴影等

## 技术实现细节

### 状态管理
```typescript
interface AppState {
  currentPodcast: Podcast | null;
  episodes: Episode[];
  currentEpisode: Episode | null;
  playerState: {
    isPlaying: boolean;
    currentTime: number;
    duration: number;
    volume: number;
  };
  loading: boolean;
  error: string | null;
}
```

### 路由配置
```typescript
const routes = [
  { path: '/', component: PodcastList },
  { path: '/episode/:id', component: EpisodeDetail },
];
```

### 音频播放器实现
- 使用 Web Audio API 或 react-audio-player
- 支持播放进度记忆
- 支持键盘快捷键
- 支持播放列表功能

## 开发计划

### Phase 1: 基础架构 (1-2天)
- [ ] 项目初始化和依赖安装
- [ ] 基础组件和布局
- [ ] 路由配置
- [ ] 数据加载和状态管理

### Phase 2: 播客列表页 (2-3天)
- [ ] 播客信息展示
- [ ] 节目列表组件
- [ ] 响应式布局
- [ ] 基础交互

### Phase 3: 播客详情页 (3-4天)
- [ ] 节目详情展示
- [ ] 音频播放器开发
- [ ] 播放控制功能
- [ ] 时间轴索引

### Phase 4: 优化和部署 (1-2天)
- [ ] 性能优化
- [ ] 错误处理
- [ ] 部署配置
- [ ] 测试和调试

## 文件结构
```
src/
├── components/           # 组件目录
│   ├── common/          # 通用组件
│   ├── podcast/         # 播客相关组件
│   └── player/          # 播放器组件
├── pages/               # 页面组件
├── hooks/               # 自定义 Hooks
├── utils/               # 工具函数
├── types/               # TypeScript 类型定义
├── styles/              # 样式文件
└── data/                # 数据文件
    └── podcast.json     # 播客数据
```

## 总结

这个设计文档提供了一个完整的播客独立站解决方案，使用 React 技术栈，支持现代化的用户体验。通过组件化设计和响应式布局，确保在不同设备上都有良好的表现。音频播放器的自定义实现将提供流畅的播放体验。
